<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>HiPS client for Python : A GSoC project - Adeel Ahmad</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="HiPS client for Python : A GSoC project Atom Feed" />
        <link href="/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="HiPS client for Python : A GSoC project RSS Feed" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">HiPS client for Python : A GSoC project </a></h1>
                <nav><ul>
                    <li><a href="/category/astronomy.html">Astronomy</a></li>
                    <li><a href="/category/gsoc.html">GSoC</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/creating-custom-decorators-in-python-36.html">Creating custom decorators in Python 3.6</a></h1>
<footer class="post-info">
        <abbr class="published" title="2017-07-02T12:41:00">
                Sun 02 July 2017
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/adeel-ahmad.html">Adeel Ahmad</a>
        </address>
<p>In <a href="/category/gsoc.html">GSoC</a>. </p>

</footer><!-- /.post-info --><p>In the <a href="http://hips.readthedocs.io">hips</a> package, often data has to be fetched from remote servers, especially HiPS tiles. One way to cut back on the queries was by introducing the <a href="github.com/hipspy/hips-extra">hips-extra</a> repository. This contains HiPS tiles from various HiPS surveys. This allows us to quickly fetch tiles from local storage, which makes the testing process less time-consuming.</p>
<p>As <a href="github.com/hipspy/hips-extra">hips-extra</a> repository does not come with the standard <a href="http://hips.readthedocs.io">hips</a> package, user has to manually clone it. The availability of the package is checked using an environment variable. This can be set using:</p>
<div class="highlight"><pre><span class="nb">export </span><span class="nv">HIPS_EXTRA</span><span class="o">=</span><span class="se">\p</span>ath<span class="se">\t</span>o<span class="se">\h</span>ips-extra
</pre></div>


<p>In Python, the path can be retrieved using the <code>os</code> module: <code>os.environ['HIPS_EXTRA']</code>. Now, what if the user does not have <a href="github.com/hipspy/hips-extra">hips-extra</a> repository on their system. In this case, we don't want to raise any errors, but to simply skip the test case. In order to do this, Python decorators become useful.</p>
<h3>A brief overview on Python Decorators</h3>
<p>Decorators provide a simple syntax for calling higher-order functions. By definition, a decorator is a function that takes another function and extends the behavior of the latter function without explicitly modifying it. Some of the most commonly used decorators are <code>@classmethod</code>, <code>@staticmethod</code>, <code>@property</code>, etc. The decorators are written above a function header, like this:</p>
<div class="highlight"><pre><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</pre></div>


<h3>Writing your own decorators</h3>
<p>To write our decorators, we create a wrapper function around <code>pytest.mark.skipif</code>. The <a href="https://docs.pytest.org/en/latest/skipping.html#id1">documentation</a> of this function can be viewed to get detailed information on how it works. The function below checks if the <code>HIPS_EXTRA</code> environment variable is set on the user's system, and if it is, it returns a True boolean . </p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="k">def</span> <span class="nf">has_hips_extra</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Is hips-extra available? (`bool`)&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s">&#39;HIPS_EXTRA&#39;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;HIPS_EXTRA&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="s">&#39;datasets/samples/DSS2Red/properties&#39;</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>


<p>A separate function below makes use of the above function to check whether the package is available or not:</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">pytest</span>

<span class="k">def</span> <span class="nf">requires_hips_extra</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Decorator to mark tests requiring ``hips-extra`` data.&quot;&quot;&quot;</span>
    <span class="n">skip_it</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">has_hips_extra</span><span class="p">()</span>
    <span class="n">reason</span> <span class="o">=</span> <span class="s">&#39;No hips-extra data available.&#39;</span>
    <span class="k">return</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">skipif</span><span class="p">(</span><span class="n">skip_it</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="n">reason</span><span class="p">)</span>
</pre></div>


<p>This decorator can now be used. An example illustrating its use is shown below. First we import the function from its location and then apply it to another function that uses data from <a href="github.com/hipspy/hips-extra">hips-extra</a> repository:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">hips.utils.testing</span> <span class="kn">import</span> <span class="n">requires_hips_extra</span>

<span class="nd">@requires_hips_extra</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">test_draw_sky_image</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>


<p>If the user's <code>HIPS_EXTRA</code>  environment variable does not have a valid path, the above test will be skipped.</p>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/hips-tile-drawing.html" rel="bookmark"
                           title="Permalink to HiPS tile drawing">HiPS tile drawing</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-06-24T11:50:00">
                Sat 24 June 2017
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/adeel-ahmad.html">Adeel Ahmad</a>
        </address>
<p>In <a href="/category/gsoc.html">GSoC</a>. </p>

</footer><!-- /.post-info -->                <p>One of the major part of the <a href="http://hips.readthedocs.io">hips</a> project is being able to draw HiPS tiles onto a larger sky image. The most important part in this is using projective transformation for computing and drawing a HiPS tile at the correct location. The discussion below is for the tile containing ...</p>
                <a class="readmore" href="/hips-tile-drawing.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/type-annotations-in-python-36-and-using-mypy-as-a-static-type-checker.html" rel="bookmark"
                           title="Permalink to Type annotations in Python 3.6 and using Mypy as a static type checker">Type annotations in Python 3.6 and using Mypy as a static type checker</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-06-11T12:58:00">
                Sun 11 June 2017
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/adeel-ahmad.html">Adeel Ahmad</a>
        </address>
<p>In <a href="/category/gsoc.html">GSoC</a>. </p>

</footer><!-- /.post-info -->                <p>The main goal of type annotations is to open up Python code to easier static analysis and refactoring, potential runtime type checking, and (perhaps, in some contexts) code generation utilizing type information. These were introduced in <a href="https://www.python.org/dev/peps/pep-0484/">PEP 484</a>.</p>
<p>In this regards, static type checking is the most important. It allows ...</p>
                <a class="readmore" href="/type-annotations-in-python-36-and-using-mypy-as-a-static-type-checker.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/an-overview-of-hierarchical-progressive-surveys-hips-and-the-healpix-framework.html" rel="bookmark"
                           title="Permalink to An overview of Hierarchical Progressive Surveys (HiPS) and the HEALPix framework">An overview of Hierarchical Progressive Surveys (HiPS) and the HEALPix framework</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-05-31T19:39:00">
                Wed 31 May 2017
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/adeel-ahmad.html">Adeel Ahmad</a>
        </address>
<p>In <a href="/category/gsoc.html">GSoC</a>. </p>

</footer><!-- /.post-info -->                <p>HiPS utilizes the HEALPix framework and uses it for mapping a sphere (in this case, part of a sky) and compiles / transforms it into <a href="#hips-tiles">tiles</a> and <a href="#hips-pixels">pixels</a>. Of course, this is in context of astronomical data. HiPS emphasizes on usability thus it tries abstract the scientific details while preserving them ...</p>
                <a class="readmore" href="/an-overview-of-hierarchical-progressive-surveys-hips-and-the-healpix-framework.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/an-introduction-to-coordinate-systems-used-in-astronomy.html" rel="bookmark"
                           title="Permalink to An introduction to coordinate systems used in astronomy">An introduction to coordinate systems used in astronomy</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-05-23T12:37:00">
                Tue 23 May 2017
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/adeel-ahmad.html">Adeel Ahmad</a>
        </address>
<p>In <a href="/category/astronomy.html">Astronomy</a>. </p>

</footer><!-- /.post-info -->                <p>Before moving on to the coordinate systems, listed below are some common measures used in astronomical studies.</p>
<h3><strong>RA / DEC</strong></h3>
<p>RA (right ascension) and DEC (declination) are the longitudes and latitudes of the sky. RA corresponds to east/west direction (like longitude), while Dec measures north/south directions, like latitude.</p>
<h3><strong>WCS ...</strong></h3>
                <a class="readmore" href="/an-introduction-to-coordinate-systems-used-in-astronomy.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/a-comparison-of-response-times-using-urllib-grequests-and-asyncio.html" rel="bookmark"
                           title="Permalink to A comparison of response times using URLLib, GRequests, and asyncio">A comparison of response times using URLLib, GRequests, and asyncio</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-05-09T15:54:00">
                Tue 09 May 2017
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/adeel-ahmad.html">Adeel Ahmad</a>
        </address>
<p>In <a href="/category/gsoc.html">GSoC</a>. </p>

</footer><!-- /.post-info -->                <p>For the HiPS client as multiple tiles have to be fetched for time efficiency, concurrency has to be achieved. So, a comparison was done utilizing Python's <code>threading</code> library. The elapsed time was calculated using <code>time</code>. For fetching the tiles <code>urllib</code>, <code>grequests</code>, <code>aiohttp</code>, <code>asyncio</code> were used. The survey chosen was ...</p>
                <a class="readmore" href="/a-comparison-of-response-times-using-urllib-grequests-and-asyncio.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/my-first-article.html" rel="bookmark"
                           title="Permalink to My First Article">My First Article</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-03-19T22:45:00">
                Sun 19 March 2017
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/adeel-ahmad.html">Adeel Ahmad</a>
        </address>
<p>In <a href="/category/gsoc.html">GSoC</a>. </p>

</footer><!-- /.post-info -->                <p>Hello World!</p>
<p>This blog will be extensively used for posting GSoC updates, apart from other technical ramblings.</p>
                <a class="readmore" href="/my-first-article.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
            </ol><!-- /#posts-list -->
            </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://openastronomy.org/">Open Astronomy</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>
                            <li><a href="/feeds/all.rss.xml" type="application/rss+xml" rel="alternate">rss feed</a></li>

                            <li><a href="https://twitter.com/adl1995">Twitter</a></li>
                            <li><a href="http://github.com/adl1995">GitHub</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>